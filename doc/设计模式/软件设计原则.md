# 软件设计原则

## 开放-关闭原则

类应该对扩展开发，对修改关闭

>代码应该如同晚霞中的莲花一样地关闭（免于改变），如同晨曦中的莲花一样地开放（能够扩展）

Open:请进，现在”开放“中。欢迎使用任务你想要的行为来扩展我们的类。如果你需要或需求有所改变，那就来吧，动手扩展吧。

Close：抱歉，现在时“关闭”状态，没错。我们花了许多时间得到了正确的代码，还解决了所有的bug。所以不能让你修改现有的代码。我们必须关闭代码以防止被修改。如果你不喜欢，可以找经理谈。

*我们的目标是允许类容易扩展，在不修改现有代码的情况下，就可以搭配新的行为。如果能实现这样的目标，有什么好处呢？这样设计具有弹性可以应对改变，可以接受新的功能来应对改变的需求*

### Q&A

#### Q:对扩展开放，对修改关闭？听起来很矛盾。设计如何兼顾两者？
A： 这是一个很好的问题。乍一听，的确感到矛盾，毕竟，越难修改的食物，就越难扩展，不是吗？ 但是，有一些聪明的OO技巧，允许系统在不修改代码的情况下，进行功能扩展。例如观察者模式
，通过加如新的观察者，我们可以在任何时候扩展Subject（主题），而且不需要向主题中添加代码。

#### Q:如何将某件东西设计成可以扩展，又禁止修改的呢？
A： 许多模式时长期经验的实证，可通过提供扩展的方法来保护代码免于被修改，例如使用*装饰着模式*就是一个很好的例子，完全遵循开放-关闭原则。

#### Q:我如何让设计的每个部分都遵循开放-关闭原则？
A： 通常，你是办不到的。要让OO设计同时具备开放性和关闭性，又不修改现有代码，需要花费许多的时间和努力。一般来说，我们实在没有闲工夫把设计的每个部分都
这么设计（而且，就算做得到，也可能只是一种浪费）。遵循开发-关闭原则，通常会引入新的抽象层次，增加代码的复杂性。你需要把注意力集中在设计中最有可能改变的地方，
然后应用开放-关闭原则。

#### Q:我怎么知道，哪些地方的改变是重要的呢?
A: 这牵涉到设计OO系统的经验和对你工作领域的了解。多看一些其他的例子可以帮你学习如何辨别设计中的变化区。
